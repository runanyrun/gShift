#!/usr/bin/env bash
set -euo pipefail

remote_name="${1:-}"
remote_url="${2:-}"

while read -r local_ref local_sha remote_ref remote_sha; do
  case "$remote_ref" in
    refs/heads/main|refs/heads/develop)
      echo "Push blocked: direct push to '${remote_ref#refs/heads/}' is not allowed."
      echo "Use a feature branch and open a Pull Request instead."
      echo "Remote: ${remote_name:-unknown} (${remote_url:-unknown})"
      exit 1
      ;;
  esac
done

exit 0
